<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>{{_('Carculator : Results')}}</title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/icon" href="/static/images/logo_icon.ico"/>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet">
    <!-- Line icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.css">
    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Slick slider -->
    <link href="/static/css/slick.css" rel="stylesheet">
    <!-- Gallery Lightbox -->
    <link href="/static/css/magnific-popup.css" rel="stylesheet">
    <!-- Theme color -->
    <link id="switcher" href="/static/css/theme-color/default-theme.css" rel="stylesheet">
	  <!-- Source Code pro font -->
	  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
    <!-- Main Style -->
    <link href="/static/css/style.css" rel="stylesheet">



	<!-- NoUISlider -->

	<!-- Animate.css -->
  	<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css" rel="stylesheet">
	    <!-- Tool page Style -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.13.0/pivot.min.css">
    <link rel="stylesheet" href="/static/css/result_style.css">

    <!-- Fonts -->

    <!-- Open Sans for body font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700,800" rel="stylesheet">
    <!-- Montserrat for Title -->
  	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>




    <![endif]-->
  </head>
  <body>

  	<!-- Start Header -->
	<header id="mu-header" class="" role="banner">
		<div class="container" style="width:100%;">
			<nav class="navbar navbar-default mu-navbar">
		  <div class="container-fluid" >
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
					  data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>

		      <!-- Image Logo -->
		      <a class="navbar-brand" href="#"><img src="\static\images\mediumsmall.png" style="height:40px;"></a>
		    </div>
			  <form action="/get_inventory_excel_for_bw">
				<button class="online-button"
						style="float:right;margin:5px;background-color:transparent;color:white;border:1px solid white;">{{_('Export Brightway2-compatible inventories')}}</button>
			  </form>
				  <button class="online-button" onclick="export_simapro_inventories()"
						style="float:right;margin:5px;background-color:transparent;color:white;border:1px solid white;">{{_('Export Simapro-compatible inventories')}}</button>
				 <button class="online-button" onclick="share_results()"
					  style="float:right;margin:5px;background-color:transparent;color:white;border:1px solid white;">{{_('Share results')}}</button>

		  </div><!-- /.container-fluid -->
		</nav>
		</div>
	</header>
	<!-- End Header -->

    <main role="main">

		<!-- Start SCOPE -->
        <section id="mu-about">
			<div class="container" style="width:90%;">
				<div class="row"  style="padding-top:80px;">
					<h2><img class="image" src="/static/images/book_icon.png"
												  style="height:70px; width:90px; border-right:3px solid rgba(0,0,0,0.6);
														padding:15px;margin-bottom:0px;display:inline-block;"
												 alt="image">
						<span style="color:grey;">{{_('REFERENCE')}}</span></h2>
				</div>
						<div class="mu-about-area" style="padding-top:20px;">
							<div class="col-md-12">
								<p>{{_('Any use of the results or inventories under any form should be referenced as following:')}}</p>
                                <p>carculator, Paul Scherrer Institut, http://carculator.psi.ch</p>
							</div>
                		</div>
            	</div>
        </section>

		<section id="mu-about">
			<div class="container" style="width:90%;background-color:#D0D3D4;">
				<div class="row"  style="padding-top:80px;">
					<h2><img class="image" src="/static/images/book_icon.png"
												  style="height:70px; width:90px; border-right:3px solid rgba(0,0,0,0.6);
														padding:15px;margin-bottom:0px;display:inline-block;"
												 alt="image">
						<span style="color:grey;">{{_('COMPARISON')}}</span></h2>
				</div>
						<div class="mu-about-area" style="padding-top:20px;">
							<div class="col-md-12">
								<div class="progress-wrap progress"
								  data-progresspercent="25"
								  data-height="20px"
								  data-width="500px"
								  data-speed="1500"
								  data-color="3a9c23">
								  <div class="progress-bar progress"></div>
								</div>
							</div>
                		</div>
            </div>
        </section>

		<section id="mu-about">
			<div class="container" style="width:90%;">
				<div class="row"  >
					<h2><img class="image" src="/static/images/co2_icon.png"
												  style="height:70px; width:90px; border-right:3px solid rgba(0,0,0,0.6);
														padding:15px;margin-bottom:0px;display:inline-block;"
												 alt="image">
						<span style="color:grey;">{{_('LIFE CYCLE IMPACT ASSESSMENT')}}</span></h2>
				</div>
						<div class="mu-about-area" style="padding-top:20px;">
							<div class="col-md-12">
								<div id="output" style="margin:20px auto;"></div>
							</div>
                		</div>
            </div>
        </section>
		<!-- Start SCOPE -->
		<section id="mu-about" style="background-color:#D0D3D4;">
			<div class="container" style="width:90%;">
				<div class="row">
					<h2><img class="image" src="/static/images/cost_icon_white.png"
												  style="height:70px; width:80px; border-right:3px solid white;
														padding:15px;margin-bottom:0px;display:inline-block;"
												 alt="image">
						<span style="color:white;">{{_('LIFE CYCLE COST ASSESSMENT')}}</span></h2>
				</div>
					<div class="mu-about-area" style="padding-top:20px;">
						<div class="col-md-12">
							<div id="output_costs" style="margin:20px auto;"></div>
						</div>
                	</div>
			</div>
        </section>

		<section id="mu-about" style="background-color:grey;">
			<div class="container" style="width:90%;">
				<div class="row">
					<h2><img class="image" src="/static/images/odometer_icon.png"
												  style="height:70px; width:80px; border-right:3px solid white;
														padding:15px;margin-bottom:0px;display:inline-block;"
												 alt="image">
						<span style="color:white;">{{_('OTHER INDICATORS')}}</span></h2>
				</div>
					<div class="mu-about-area" style="padding-top:20px;">
						<div class="col-md-12">
							<table class="table" style="width:100%;color:white;">
								<thead>
									<tr>
										<th><h3>{{_('Energy consumption along driving cycle')}}</h3></th>
										<th><h3>{{_('Pollutants emissions along driving cycle')}}</h3></th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>
											<div>

											</div>
										</td>
										<td>
											<div>

											</div>
										</td>

									</tr>

								</tbody>

							</table>
							<table class="table" style="width:100%;color:white;">
								<thead>
										<th>
											<th><h3>{{_('Noise emissions along driving cycle')}}</h3></th>
											<th><h3>{{_('GHG emissions vs. ownership costs')}}</h3></th>
										</th>
								</thead>
								<tbody>
										<tr>
											<td>
												<div>

												</div>
											</td>
											<td>
												<div>

												</div>
											</td>

										</tr>
								</tbody>

							</table>
						</div>
                	</div>
			</div>
        </section>



	<!-- Start footer -->
	<footer id="mu-footer" role="contentinfo">
			<div class="container" style="width:100%;">
				<div class="row" style="width:100%;margin-top:25px;">
				  <div class="column" style="width:33.33%;float:left;text-align:center;">
					  <img src="/static/images/psi_logo.svg" style="height:50px;">
				  </div>
				  <div class="column" style="width:33.33%;display: inline-block;">
					  <div class="mu-footer-area">
						  <p>&copy; {{_('Copyright')}} <a rel="nofollow" href="http://www.psi.ch">{{_('Paul Scherrer Institut')}}</a>.
							  {{_('All rights reserved')}}.</p>
					  </div>
				  </div>
				  <div class="column" style="width:33.33%;float: right;text-align:center;">
					  <img src="/static/images/ecoinvent_logo.png" style="height:50px;">
				  </div>
				</div>
			</div>
	</footer>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
		<script src="https://cdn.plot.ly/plotly-basic-latest.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.22.0/pivot.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.22.0/plotly_renderers.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.6.0/tips_data.min.js"></script>
	  <script
		  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
		  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
		  crossorigin="anonymous"></script>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap-notify@3.1.3/bootstrap-notify.min.js"></script>
		<script type="text/javascript" src="/static/js/i18n.js"></script>


		<script>


    var data = {{data|safe}};
    console.log(data);
    var imp;

//  Load the JSON File
	var name_default_impact;
	var chart_title;
	var chart_title_cost;
    $.when($.ajax({
                url: "/get_language",
                dataType: 'json',
                type: 'GET',
                success : function(data) {
                   var json = data
                    return json
                    },
                error: function(xhr, status, error){console.log(error)}})
            ).done(function(json){
                i18n.translator.add(json);
                name_default_impact = i18n("climate_change");
				chart_title = i18n("chart_title");
				chart_title_cost = i18n("chart_title_cost");

				$("#output").pivotUI(
				  data[0], {
					rows: ["impact category", "category"],
					cols: ["year", "powertrain", "size"],
					vals: ["value"],
					inclusions: {"impact category":[name_default_impact]},
					"colOrder": "value_a_to_z",
					aggregatorName: "Sum",
					rendererName: "Stacked Bar Chart",
					renderers: $.extend(
						$.pivotUtilities.renderers,
						$.pivotUtilities.export_renderers,
					  $.pivotUtilities.plotly_renderers
					),
					rendererOptions: {plotly: {title: {text: chart_title}}},
					onRefresh: function(config){
						imp = config["inclusions"]["impact category"][0]
						}
				  });

				  $("#output_costs").pivotUI(
					  data[1], {
						rows: ["cost category"],
						cols: ["year", "powertrain", "size"],
						vals: ["value"],
						exclusions: {"cost category":["total"]},
						"colOrder": "value_a_to_z",
						aggregatorName: "Sum",
						rendererName: "Stacked Bar Chart",
						renderers: $.extend(
							$.pivotUtilities.renderers,
							$.pivotUtilities.export_renderers,
						  $.pivotUtilities.plotly_renderers
						),
						rendererOptions: {plotly: { title: {text: chart_title_cost}}},
					  });
            });

 function share_results(){
 	var str = i18n('save_results')
    $.notify({
        icon: "glyphicon glyphicon-warning-sign",
        message: str
    },
    {
        placement: {
            from: "top",
            align: "center"
        },
        type:"success"
    },
    {
        animate: {
            enter: "animated bounceInDown",
            exit: "animated bounceOutUp"
        },

    }
    );

 };

 function export_bw2_inventories(){
 	var str = i18n('inventory_download')
    $.notify({
        icon: "glyphicon glyphicon-warning-sign",
        message: str
    },
    {
        placement: {
            from: "top",
            align: "center"
        },
        type:"success"
    },
    {
        animate: {
            enter: "animated bounceInDown",
            exit: "animated bounceOutUp"
        },
    }
    );
 };

 function export_simapro_inventories(){
 	var str = i18n('inventory_download')
    $.notify({
        icon: "glyphicon glyphicon-warning-sign",
        message: str
    },
    {
        placement: {
            from: "top",
            align: "center"
        },
        type:"success"
    },
    {
        animate: {
            enter: "animated bounceInDown",
            exit: "animated bounceOutUp"
        },

    }
    );

 };

var progressSelector = $(".progress-wrap");
     progressSelector.each(function(){
     var getPercent = $(this).attr("data-progresspercent");
     var getSpeed = parseInt($(this).attr("data-speed"));
     var getColor = $(this).attr("data-color");
     var getHeight = $(this).attr("data-height");
     var getWidth = $(this).attr("data-width");
     $(this).css({"height":getHeight,"width":getWidth});
     $(this).find(".progress-bar").css({"background-color":"#"+getColor}).animate({ width:getPercent+'%' },getSpeed)
     });

		</script>
		<link rel="stylesheet" href="/static/js/result_page.js">

</body>
</html>
