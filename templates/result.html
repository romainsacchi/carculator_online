<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Carculator : Results</title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/icon" href="/static/images/favicon.ico"/>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet">
    <!-- Line icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.css">
    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Slick slider -->
    <link href="/static/css/slick.css" rel="stylesheet">
    <!-- Gallery Lightbox -->
    <link href="/static/css/magnific-popup.css" rel="stylesheet">
    <!-- Theme color -->
    <link id="switcher" href="/static/css/theme-color/default-theme.css" rel="stylesheet">
	  <!-- Source Code pro font -->
	  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
    <!-- Main Style -->
    <link href="/static/css/style.css" rel="stylesheet">


	<!-- NoUISlider -->

	<!-- Animate.css -->
	  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css" rel="stylesheet">
	    <!-- Tool page Style -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.13.0/pivot.min.css">
    <link rel="stylesheet" href="/static/css/result_style.css">

    <!-- Fonts -->

    <!-- Open Sans for body font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700,800" rel="stylesheet">
    <!-- Montserrat for Title -->
  	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>




    <![endif]-->
  </head>
  <body>

  	<!-- Start Header -->
	<header id="mu-header" class="" role="banner">
		<div class="container" style="width:100%;">
			<nav class="navbar navbar-default mu-navbar">
		  <div class="container-fluid" >
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
					  data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>

		      <!-- Image Logo -->
		      <a class="navbar-brand" href="#"><img src="/static/images/carculator logo.png" style="height:30px;"></a>
		    </div>
				<button class="online-button"
						style="float:right;margin:5px;background-color:transparent;color:white;border:1px solid white;">Share configuration</button>
				 <button class="online-button"
					  style="float:right;margin:5px;background-color:transparent;color:white;border:1px solid white;">Share results</button>

		  </div><!-- /.container-fluid -->
		</nav>
		</div>
	</header>
	<!-- End Header -->

    <main role="main">

		<!-- Start SCOPE -->
		<section id="mu-about">
			<div class="container" style="width:90%;">
				<div class="row">
					<div class="col-md-12">
                        <div id="output" style="margin:100px auto;"></div>
                    </div>
                </div>
            </div>
        </section>



	<!-- Start footer -->
	<footer id="mu-footer" role="contentinfo">
			<div class="container" style="width:100%;">
				<div class="row" style="width:100%;margin-top:25px;">
				  <div class="column" style="width:33.33%;float:left;text-align:center;">
					  <img src="/static/images/psi_logo.svg" style="height:50px;">
				  </div>
				  <div class="column" style="width:33.33%;display: inline-block;">
					  <div class="mu-footer-area">
						  <p>&copy; {{_('Copyright')}} <a rel="nofollow" href="http://www.psi.ch">{{_('Paul Scherrer Institut')}}</a>.
							  {{_('All rights reserved')}}.</p>
					  </div>
				  </div>
				  <div class="column" style="width:33.33%;float: right;text-align:center;">
					  <img src="/static/images/ecoinvent_logo.png" style="height:50px;">
				  </div>
				</div>
			</div>
	</footer>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
		<script src="https://cdn.plot.ly/plotly-basic-latest.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.22.0/pivot.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.22.0/plotly_renderers.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.6.0/tips_data.min.js"></script>
	  <script
		  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
		  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
		  crossorigin="anonymous"></script>
  <script>
  var list_unit = {
        'agricultural land occupation':'square meter-year',
        'climate change':'kg CO2-Eq',
        'fossil depletion':'kg oil-Eq',
        'freshwater ecotoxicity':'kg 1,4-DC.',
        'freshwater eutrophication':'kg P-Eq',
        'human toxicity':'kg 1,4-DC.',
        'ionising radiation':'kg U235-Eq',
        'marine ecotoxicity':'kg 1,4-DC.',
        'marine eutrophication':'kg N-Eq',
        'metal depletion':'kg Fe-Eq',
        'natural land transformation':'square meter',
        'ozone depletion':'kg CFC-11.',
        'particulate matter formation':'kg PM10-Eq',
        'photochemical oxidant formation':'kg NMVOC',
        'terrestrial acidification':'kg SO2-Eq',
        'terrestrial ecotoxicity':'kg 1,4-DC.',
        'urban land occupation':'square meter-year',
        'water depletion':'cubic meter',
        'human noise':'Person-Pa.s',
        };

    var data = {{data|safe}};
    var imp;
    $("#output").pivotUI(
      data, {
        rows: ["impact category", "category"],
        cols: ["year", "powertrain", 'size'],
        vals: ["value"],
        inclusions: {'impact category':["climate change"]},
        "colOrder": "value_a_to_z",
        aggregatorName: "Sum",
        rendererName: "Stacked Bar Chart",
        renderers: $.extend(
            $.pivotUtilities.renderers,
            $.pivotUtilities.export_renderers,
          $.pivotUtilities.plotly_renderers
        ),
        rendererOptions: {plotly: { yaxis: { title: list_unit['climate change']},
        							title: {text: 'Climate change impacts, per vehicle-kilometer'}}},

        onRefresh: function(config){
        	imp = config['inclusions']['impact category'][0]
            }


      });

  function refresh_graph(imp){
  	var update = {
				title: imp, // updates the title
				'yaxis.title': list_unit[imp]     // updates the end of the yaxis range
			};
  	//Plotly.relayout($("#output"), update)
  };



	</script>
</body>
</html>
